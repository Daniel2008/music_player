# 用户手册

详细的功能使用说明和操作指南。

## 目录

- [界面概览](#界面概览)
- [播放功能](#播放功能)
- [播放列表](#播放列表)
- [在线搜索](#在线搜索)
- [歌词功能](#歌词功能)
- [收藏管理](#收藏管理)
- [主题与皮肤](#主题与皮肤)
- [设置选项](#设置选项)
- [快捷键](#快捷键)
- [常见问题](#常见问题)

## 界面概览

### 主窗口布局

```
┌──────────────────────────────────────────────┐
│ [标题栏]          Music Player    [-][□][×] │
├────┬─────────────────────────────────────────┤
│ 🎵 │                                         │
│ 播放│                                         │
│    │         主内容区域                      │
│ 🔍 │       (播放器/搜索/收藏/设置)            │
│ 搜索│                                         │
│    │                                         │
│ ❤️ │                                         │
│ 收藏│                                         │
│    │                                         │
│ ⚙️ │                                         │
│ 设置│                                         │
│    │                                         │
│ ☀️ │                                         │
│主题 │                                         │
├────┴─────────────────────────────────────────┤
│          迷你播放器控制栏                     │
│  [封面] 歌曲信息  ⏮ ⏯ ⏭  进度条  🔊        │
└──────────────────────────────────────────────┘
```

### 导航栏

左侧垂直导航栏包含四个主要页面：

- **🎵 播放**：播放器主页面，显示当前播放、歌词、可视化效果
- **🔍 搜索**：在线音乐搜索
- **❤️ 收藏**：我的收藏和播放历史
- **⚙️ 设置**：应用设置和配置

## 播放功能

### 添加本地音乐

1. 在播放器页面，点击"添加歌曲"按钮
2. 在文件选择器中选择音乐文件（支持多选）
3. 支持的格式：
   - MP3 (.mp3)
   - FLAC (.flac)
   - WAV (.wav)
   - M4A (.m4a)
   - OGG (.ogg)

### 播放控制

#### 基本控制

- **播放/暂停**：
  - 点击播放按钮
  - 快捷键：`Ctrl+Alt+P`
  
- **上一曲**：
  - 点击上一曲按钮
  
- **下一曲**：
  - 点击下一曲按钮
  - 当前曲目播放完成后自动播放

#### 进度控制

- **跳转播放**：
  - 拖动进度条到目标位置
  - 点击进度条直接跳转
  
- **快进/快退**：
  - 快进 5 秒：`Alt+→`
  - 快退 5 秒：`Alt+←`

#### 音量控制

- 拖动音量滑块调节音量（0-100%）
- 点击音量图标快速静音/恢复

### 播放状态

在迷你播放器控制栏可以看到：
- 当前歌曲封面（如果有）
- 歌曲标题和艺术家
- 播放进度（当前时间/总时长）
- 播放状态（播放中/暂停）

## 播放列表

### 查看播放列表

在播放器页面右侧可以看到当前播放列表。

### 列表操作

- **播放歌曲**：点击列表中的歌曲
- **删除歌曲**：悬停后点击删除按钮
- **清空列表**：点击"清空"按钮

### 播放模式

支持的播放模式：
- **顺序播放**：按列表顺序播放
- **随机播放**：随机选择下一首
- **单曲循环**：重复播放当前歌曲
- **列表循环**：播放到列表末尾后从头开始

## 在线搜索

### 搜索歌曲

1. 切换到"搜索"标签页
2. 在搜索框输入关键词（歌曲名、歌手名、专辑名）
3. 选择音乐源：
   - 网易云音乐（netease）
   - QQ 音乐（tencent）
   - 酷狗音乐（kugou）
   - 酷我音乐（kuwo）
4. 点击"搜索"按钮

### 播放在线音乐

- **直接播放**：点击搜索结果中的播放按钮
- **添加到列表**：点击"+"按钮添加到播放列表
- **查看专辑**：点击专辑名查看专辑所有歌曲

### 音质选择

在设置页面可以选择默认音质：
- **128k**：标准音质，流量友好
- **320k**：高品质
- **740k**：无损音质（FLAC）
- **999k**：Hi-Res 超高音质

> 注意：实际可用音质取决于音乐源的支持情况。

### 下载音乐

1. 在搜索结果中点击下载按钮
2. 选择音质
3. 在下载管理页面查看下载进度
4. 下载完成后自动添加到播放列表

## 歌词功能

### 本地歌词

#### 自动加载
将 `.lrc` 歌词文件与音乐文件放在同一目录，并保持相同的文件名：

```
音乐文件：Song Name.mp3
歌词文件：Song Name.lrc
```

应用会自动识别并加载歌词。

#### 歌词格式
标准 LRC 格式：
```
[00:12.00]第一句歌词
[00:17.20]第二句歌词
[00:21.10]第三句歌词
```

### 在线歌词

#### 自动获取
播放在线音乐时，应用会自动获取歌词。

#### 本地歌曲搜索歌词
1. 在设置中启用"自动为本地歌曲搜索在线歌词"
2. 播放本地歌曲时自动搜索匹配的歌词
3. 歌词会缓存到本地，下次播放直接使用

#### 手动搜索歌词
1. 在播放器页面点击歌词区域
2. 点击"搜索歌词"按钮
3. 输入搜索关键词（默认使用歌曲标题）
4. 选择匹配的结果

### 歌词显示

- 当前句高亮显示
- 自动滚动跟随播放进度
- 支持双语歌词（原文+翻译）

## 收藏管理

### 收藏歌曲

- **播放页面**：点击心形图标收藏当前歌曲
- **搜索页面**：点击搜索结果中的收藏按钮

### 查看收藏

切换到"收藏"标签页查看：
- **我的收藏**：所有收藏的歌曲
- **播放历史**：最近播放的歌曲

### 取消收藏

- 在收藏列表中点击已收藏的心形图标
- 或在播放页面取消收藏

### 从收藏播放

点击收藏列表中的歌曲直接播放。

## 主题与皮肤

### 切换主题模式

点击左侧导航栏底部的主题切换按钮：
- ☀️ 浅色模式
- 🌙 深色模式

### 使用预设皮肤

1. 进入"设置"页面
2. 在"主题与皮肤"区域选择预设皮肤：
   - Classic Blue（经典蓝）
   - Forest Dark（森林暗色）

### 自定义皮肤

#### 创建皮肤配置文件

创建 JSON 格式的皮肤文件：

```json
{
  "name": "My Custom Skin",
  "primary": "#1976D2",
  "background": "#121212",
  "brightness": "dark"
}
```

参数说明：
- `name`: 皮肤名称
- `primary`: 主题色（十六进制颜色代码）
- `background`: 背景色
- `brightness`: 亮度模式（"light" 或 "dark"）

#### 加载自定义皮肤

1. 在设置页面点击"加载自定义皮肤"
2. 选择皮肤 JSON 文件
3. 应用会立即应用新主题

## 设置选项

### API 设置

- **API 地址**：配置音乐 API 服务地址
- **请求超时**：设置 API 请求超时时间（5-60 秒）
- **默认音质**：选择默认下载和播放音质

### 歌词设置

- **自动搜索歌词**：为本地歌曲自动搜索在线歌词
- **默认搜索源**：选择默认的歌词搜索来源

### 播放设置

- **自动播放下一首**：播放完成后自动播放下一首
- **启动时恢复播放**：应用启动时恢复上次的播放状态

### 下载设置

- **下载目录**：选择音乐下载保存位置
- **下载音质**：设置默认下载音质

## 快捷键

### 全局快捷键（系统级）

| 快捷键 | 功能 |
|--------|------|
| `Ctrl+Alt+P` | 播放/暂停 |
| `Alt+→` | 快进 5 秒 |
| `Alt+←` | 快退 5 秒 |

> 注意：
> - Windows：可能需要管理员权限
> - macOS：需要在系统偏好设置中授予辅助功能权限
> - Linux：检查桌面环境的快捷键冲突

### 应用内快捷键

| 快捷键 | 功能 |
|--------|------|
| `Space` | 播放/暂停（焦点在播放器时）|
| `Esc` | 退出全屏可视化 |

## 音频可视化

### 查看可视化

在播放器页面顶部可以看到实时的频谱可视化。

### 全屏模式

1. 点击可视化区域
2. 或点击全屏按钮
3. 按 `Esc` 退出全屏

### 可视化类型

- **频谱**：FFT 频谱分析
- **波形**：音频波形显示

## 常见问题

### 无法播放某些音乐文件

**原因**：
- 文件格式不支持
- 文件损坏

**解决方案**：
- 检查文件格式是否在支持列表中
- 尝试使用其他播放器验证文件是否完好
- 转换为 MP3 或 FLAC 格式

### 在线音乐无法播放

**原因**：
- 网络连接问题
- API 服务不可用
- 音乐链接已过期

**解决方案**：
- 检查网络连接
- 在设置中测试 API 连接
- 切换其他音乐源
- 重新搜索并播放

### 歌词不同步

**原因**：
- 歌词文件时间轴不准确
- 音乐文件与歌词不匹配

**解决方案**：
- 查找更准确的歌词文件
- 使用歌词编辑器调整时间轴
- 重新搜索歌词

### 快捷键不生效

**解决方案**：

**Windows**:
```powershell
# 以管理员身份运行应用
Right-click → Run as administrator
```

**macOS**:
```
系统偏好设置 → 安全性与隐私 → 隐私 → 辅助功能
→ 添加 Music Player 应用
```

**Linux**:
- 检查桌面环境的快捷键设置
- 确保没有冲突的全局快捷键

### 应用启动慢

**原因**：
- 首次启动需要加载配置
- 播放列表过大

**解决方案**：
- 等待初始化完成（通常只在首次启动时较慢）
- 清理播放列表中不再需要的歌曲

### 内存占用高

**原因**：
- 长时间运行积累的缓存
- 播放列表过大

**解决方案**：
- 重启应用
- 清理缓存文件
- 减少播放列表大小

## 技巧与窍门

### 批量添加音乐

使用文件选择器的多选功能，一次性添加整个文件夹的音乐。

### 创建主题播放列表

1. 清空当前播放列表
2. 添加特定主题的歌曲
3. 设置为列表循环播放

### 离线使用

1. 提前下载喜欢的在线音乐
2. 关闭网络也能播放已下载的歌曲

### 快速切换歌曲

使用键盘快捷键比鼠标点击更快。

## 获取帮助

如果遇到其他问题：

1. 查看 [FAQ](./FAQ.md)
2. 搜索 [GitHub Issues](https://github.com/your-repo/music_player/issues)
3. 提交新的 Issue
4. 参与 [讨论区](https://github.com/your-repo/music_player/discussions)
